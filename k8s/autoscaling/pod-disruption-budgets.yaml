# Pod Disruption Budget for User Service
# Ensures at least 1 pod is always available during disruptions
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: user-service-pdb
  namespace: default
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: user-service

---
# Pod Disruption Budget for Product Service
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: product-service-pdb
  namespace: default
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: product-service

---
# Pod Disruption Budget for Order Service
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: order-service-pdb
  namespace: default
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: order-service

---
# Pod Disruption Budget for Payment Service
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: payment-service-pdb
  namespace: default
spec:
  minAvailable: 1
  selector:
    matchLabels:
      app: payment-service

---
# Pod Disruption Budget for Frontend
apiVersion: policy/v1
kind: PodDisruptionBudget
metadata:
  name: frontend-pdb
  namespace: default
spec:
  minAvailable: 2  # Keep at least 2 frontend pods during disruptions
  selector:
    matchLabels:
      app: frontend