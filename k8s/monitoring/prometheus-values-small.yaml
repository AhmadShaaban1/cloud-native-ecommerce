# Prometheus Configuration - Optimized for t3.small
prometheus:
  prometheusSpec:
    retention: 7d
    retentionSize: "5GB"
    
    # REDUCED RESOURCES
    resources:
      requests:
        cpu: 100m        # Reduced from 200m
        memory: 256Mi    # Reduced from 512Mi
      limits:
        cpu: 300m        # Reduced from 500m
        memory: 512Mi    # Reduced from 1Gi
    
    storageSpec:
      volumeClaimTemplate:
        spec:
          storageClassName: ebs-sc
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 5Gi    # Reduced from 10Gi
    
    serviceMonitorSelectorNilUsesHelmValues: false
    podMonitorSelectorNilUsesHelmValues: false

# Grafana Configuration - Optimized
grafana:
  enabled: true
  adminPassword: "admin123"
  
  service:
    type: LoadBalancer
    annotations:
      service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
  
  # REDUCED RESOURCES
  resources:
    requests:
      cpu: 50m         # Reduced from 100m
      memory: 128Mi    # Reduced from 256Mi
    limits:
      cpu: 150m        # Reduced from 200m
      memory: 256Mi    # Reduced from 512Mi
  
  persistence:
    enabled: true
    storageClassName: ebs-sc
    size: 2Gi         # Reduced from 5Gi
  
  defaultDashboardsEnabled: true
  additionalDataSources: []

# Alertmanager Configuration - Optimized
alertmanager:
  enabled: true
  
  alertmanagerSpec:
    # REDUCED RESOURCES
    resources:
      requests:
        cpu: 25m       # Reduced from 50m
        memory: 64Mi   # Reduced from 128Mi
      limits:
        cpu: 50m       # Reduced from 100m
        memory: 128Mi  # Reduced from 256Mi
    
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: ebs-sc
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: 1Gi    # Reduced from 2Gi

# Node Exporter - Lightweight
nodeExporter:
  enabled: true
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 50m
      memory: 64Mi

# Kube State Metrics - Lightweight
kubeStateMetrics:
  enabled: true
  resources:
    requests:
      cpu: 10m
      memory: 32Mi
    limits:
      cpu: 50m
      memory: 64Mi

# Prometheus Operator - Lightweight
prometheusOperator:
  resources:
    requests:
      cpu: 50m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi
  
  admissionWebhooks:
    enabled: false
    patch:
      enabled: false